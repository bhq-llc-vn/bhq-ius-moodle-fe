"use strict";(self.webpackChunkbhq_ius_moodle=self.webpackChunkbhq_ius_moodle||[]).push([[152],{152:(D,d,r)=>{r.r(d),r.d(d,{AuthenticationModule:()=>I});var h=r(9808),a=r(2382),z=r(520),g=r(9826),n=r(5e3);let x=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["internal-app-authentication"]],decls:1,vars:0,template:function(o,i){1&o&&n._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2}),t})();function v(t,e,o,i,s,u,c){try{var m=t[u](c),l=m.value}catch(k){return void o(k)}m.done?e(l):Promise.resolve(l).then(i,s)}var T=r(6805),A=r(930),y=r(5973),Z=r(5017),_=r(6042),J=r(2683),w=r(2643),f=r(1047),E=r(1894),p=r(4546),L=r(2359);function F(t,e){if(1&t&&(n.ynx(0),n._UZ(1,"nz-alert",19),n.BQk()),2&t){const o=n.oxw();n.xp6(1),n.Q6J("nzMessage",o.messageError)}}function B(t,e){1&t&&(n.ynx(0),n._uU(1," M\u1ee5c n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng "),n.BQk())}function O(t,e){1&t&&n.YNc(0,B,2,0,"ng-container",5),2&t&&n.Q6J("ngIf",e.$implicit.hasError("required"))}function Q(t,e){1&t&&(n.ynx(0),n._uU(1," M\u1ee5c n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng "),n.BQk())}function U(t,e){1&t&&n.YNc(0,Q,2,0,"ng-container",5),2&t&&n.Q6J("ngIf",e.$implicit.hasError("required"))}function b(t,e){if(1&t){const o=n.EpF();n.TgZ(0,"i",20),n.NdJ("click",function(){n.CHM(o);const s=n.oxw();return n.KtG(s.passwordVisible=!s.passwordVisible)}),n.qZA()}if(2&t){const o=n.oxw();n.Q6J("nzType",o.passwordVisible?"eye-invisible":"eye")}}const P=[{path:"",component:x,children:[{path:"login",component:(()=>{class t{constructor(o,i,s){this.fb=o,this.authService=i,this.router=s,this.Error=!0,this.passwordVisible=!1,this.messageError=""}formBuilder(){this.loginForm=this.fb.group({username:["",[a.kI.required]],password:["",[a.kI.required]],rememberMe:[null,[]]})}ngOnInit(){this.formBuilder(),console.log("init form login")}login(){var o=this;return function C(t){return function(){var e=this,o=arguments;return new Promise(function(i,s){var u=t.apply(e,o);function c(l){v(u,i,s,c,m,"next",l)}function m(l){v(u,i,s,c,m,"throw",l)}c(void 0)})}}(function*(){try{const i=o.loginForm.value;let s=yield function M(t,e){const o="object"==typeof e;return new Promise((i,s)=>{const u=new A.Hp({next:c=>{i(c),u.unsubscribe()},error:s,complete:()=>{o?i(e.defaultValue):s(new T.K)}});t.subscribe(u)})}(o.authService.login(i));s&&s.accessToken?(localStorage.setItem("access_token",s.accessToken),o.router.navigateByUrl("pages")):(o.Error=!1,o.messageError="T\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang")}catch(i){console.log(i),o.Error=!1,o.messageError="T\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang"}})()}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(a.qu),n.Y36(y.$),n.Y36(g.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["internal-app-login"]],decls:33,vars:6,consts:[[1,"main-wrapper"],[1,"login-form"],[1,"login-content"],[1,"login-title","mb-4","mt-3"],[1,"login-eror"],[4,"ngIf"],["nz-form","",3,"formGroup"],[3,"nzErrorTip"],["for","username"],["nz-input","","type","text","name","username","id","username","formControlName","username"],["Username",""],["for","password"],[3,"nzSuffix"],["nz-input","","name","password","id","password","formControlName","password",3,"type"],["Password",""],["suffixTemplate",""],[1,"form-group"],[1,"mt-3"],["type","button","nz-button","","nzBlock","","nzType","primary",3,"click"],["nzType","error",1,"my-3",3,"nzMessage"],["id","eye","nz-icon","",3,"nzType","click"]],template:function(o,i){if(1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"section")(4,"div",3)(5,"h4"),n._uU(6,"\u0110\u0103ng nh\u1eadp h\u1ec7 th\u1ed1ng"),n.qZA()()(),n.TgZ(7,"section"),n._UZ(8,"div",4),n.qZA(),n.TgZ(9,"section"),n.YNc(10,F,2,1,"ng-container",5),n.TgZ(11,"form",6)(12,"nz-form-item")(13,"nz-form-control",7)(14,"nz-form-label",8),n._uU(15,"T\xean \u0111\u0103ng nh\u1eadp"),n.qZA(),n._UZ(16,"input",9),n.YNc(17,O,1,1,"ng-template",null,10,n.W1O),n.qZA()(),n.TgZ(19,"nz-form-item")(20,"nz-form-control",7)(21,"nz-form-label",11),n._uU(22,"M\u1eadt kh\u1ea9u"),n.qZA(),n.TgZ(23,"nz-input-group",12),n._UZ(24,"input",13),n.YNc(25,U,1,1,"ng-template",null,14,n.W1O),n.qZA(),n.YNc(27,b,1,1,"ng-template",null,15,n.W1O),n.qZA()(),n.TgZ(29,"div",16)(30,"div",17)(31,"button",18),n.NdJ("click",function(){return i.login()}),n._uU(32," \u0110\u0103ng nh\u1eadp "),n.qZA()()()()()()()()),2&o){const s=n.MAs(18),u=n.MAs(26),c=n.MAs(28);n.xp6(10),n.Q6J("ngIf",!i.Error),n.xp6(1),n.Q6J("formGroup",i.loginForm),n.xp6(2),n.Q6J("nzErrorTip",s),n.xp6(7),n.Q6J("nzErrorTip",u),n.xp6(3),n.Q6J("nzSuffix",c),n.xp6(1),n.Q6J("type",i.passwordVisible?"text":"password")}},dependencies:[h.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,Z.Ls,_.ix,J.w,w.dQ,f.Zp,f.gB,f.ke,E.t3,E.SK,p.Lr,p.Nx,p.iK,p.Fd,L.r],styles:[".main-wrapper[_ngcontent-%COMP%]{height:100vh;width:100vw;position:relative;display:flex;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{width:30%}.login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]{margin-top:5%;border:none;box-shadow:0 2px 4px #0000001a,0 8px 16px #0000001a;padding:30px}.login-form[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{text-transform:uppercase;text-align:center}#eye[_ngcontent-%COMP%]{cursor:pointer}"]}),t})()}]}];let N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(P),g.Bz]}),t})();var S=r(9923),Y=r(8466);let I=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[y.$],imports:[h.ez,a.u5,a.UX,N,z.JF,S.v.forRoot(),Y.V.forRoot()]}),t})()}}]);